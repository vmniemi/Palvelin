x) Lue ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)
Karvinen 2014: Hello Salt Infra-as-Code

- Saltilla voi tehdä tiloja (state), joita voidaan ajaa, jotta saataisiin haluttu lopputulos



Salt minion asennus:

      $ sudo apt-get update
      $ sudo apt-get -y install salt-minion
      
Artikkelissa käytettiin micro editoria, ei ole siis pakollista asentaa

    $ sudo apt-get -y install micro
    $ export EDITOR=micro
    
- Saltissa voidaan tehdä moduuleita, joilla voi asentaa konfiguroida ja käynnistää haluttu ohjelma
- Se pitää tehdä /srv/salt hakemistoon kuten näin:


      $ sudo mkdir -p /srv/salt/hello/

  navigointi  luotuun:
  
      $ cd /srv/salt/hello/

  Init.sls editointi ollessaan polussa /srv/salt/hello/

      $ sudoedit init.sls


Kirjoitetaan Saltin omalla kiellellä pätkä koodia, artikkelissa lyhyt ja ytimekäs esimerkki:

      /tmp/hellotero:
        file.managed

Selitys mitä koodi tekee:


Tiedostopolku ja haluttu tiedosto:

      /tmp/hellotero: 

Itse komento ja haluttu lopputulos (tiedosto on luotu)

             file.managed


Testataan ajamalla luotu hello tiedosto

            $ sudo salt-call --local state.apply hello

Ensimmäisen kerran ajettuna se luo tiedoston 

        /tmp/hellotero: 

Samaa komentoja voi ajaa niin monta kertaa kuin haluaa, mutta koska haluttu lopputulos on saavutettu, luotu tiedosto, mitään ei tapahdu.

Näin idempotenssi on saavutettu tässä tapauksessa







Salt contributors: Salt overview, kohdat:

Rules of YAML

Dataa säilytettään muodossa avain: arvo pareilla

Merkitään kaksoispisteellä
Avain:

arvo merkitään välilyönnillä avaimen kaksoispisteen jälkeen



case-sensitive: isoilla ja pienillä kirjaimilla on väliä

Välejä ei tehdä tabulaattorilla(tab), PELKÄSTÄÄN VÄLILYÖNNILLÄ (SPACE) 
Comments begin with a hash “#”.


YAML simple structure

YAML koostuu kolmesta eri elemententti tyypistä

Scalars: avain-arvo parin arvo voi olla numero, merkkijono tai totuusarvomuuttuja(boolean) 

Lists - avain: jonka alla on lista arvoja, jossa jokainen arvo on eri viivalla ja merkitty kahdella välilyönnillä ja väliviivalla 

Dictionaries - kokoelma avain-arvo pari  listoista


Lists and dictionaries - YAML block structures

YAML is organized into block structures.

Listan sisältö pitää sisentää yhdellä tai kahdella välilyönnillä ( kaksi on standardi)

Listan kohdat merkitään väliviivalla ja välilyönnillä 



a) Hei infrakoodi! Kokeile paikallisesti (esim 'sudo salt-call --local') infraa koodina. Kirjota sls-tiedosto, joka tekee esimerkkitiedoston /tmp/ -kansioon.


![mastersrvhello](https://github.com/user-attachments/assets/253895ae-ceb4-42c9-a478-1edcb6f0a1fb)




![slshelloworld](https://github.com/user-attachments/assets/b16a9fd8-49bb-4896-aa4b-83cddaf9b6d3)




![helloworld2](https://github.com/user-attachments/assets/88a0ad50-40c8-461c-ae47-79bf9dbb4f78)


Testasin, että se oikeasti on olemassa 

![lstesti](https://github.com/user-attachments/assets/a5b0ddef-e440-4f8f-9a30-256abf6d7615)


Ajetaan komento paikallisesti komennolla


![helloworldsalt1](https://github.com/user-attachments/assets/776a7e4a-f593-41b0-be12-72fbfd591b24)




b) Aja esimerkki sls-tiedostosi verkon yli orjalla.


Ajoin komennon orjalle komennolla 




![slavehello1](https://github.com/user-attachments/assets/7558dcbd-b2f0-45f9-9a7f-c711c8f6f4b4)



Ajoin toisen kerran


![slavehello2](https://github.com/user-attachments/assets/ede9fdd2-b079-4b88-87c7-89c0d846ecfc)


Mitään ei tapahtunut kohde haluttu lopputila oli saavutettu.



c) Tee sls-tiedosto, joka käyttää vähintään kahta eri tilafunktiota näistä: package, file, service, user. Tarkista eri ohjelmalla, että lopputulos on oikea. Osoita useammalla ajolla, että sls-tiedostosi on idempotentti.


