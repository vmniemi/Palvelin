x) Lue ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)
Karvinen 2014: Hello Salt Infra-as-Code

- Saltilla voi tehdä tiloja (state), joita voidaan ajaa, jotta saataisiin haluttu lopputulos



Salt minion asennus:

      $ sudo apt-get update
      $ sudo apt-get -y install salt-minion
      
Artikkelissa käytettiin micro editoria, ei ole siis pakollista asentaa

    $ sudo apt-get -y install micro
    $ export EDITOR=micro
    
- Saltissa voidaan tehdä moduuleita, joilla voi asentaa konfiguroida ja käynnistää haluttu ohjelma
- Se pitää tehdä /srv/salt hakemistoon kuten näin:


      $ sudo mkdir -p /srv/salt/hello/

  navigointi  luotuun:
  
      $ cd /srv/salt/hello/

  Init.sls editointi ollessaan polussa /srv/salt/hello/

      $ sudoedit init.sls


Kirjoitetaan Saltin omalla kiellellä pätkä koodia, artikkelissa lyhyt ja ytimekäs esimerkki:

      /tmp/hellotero:
        file.managed

Selitys mitä koodi tekee:


Tiedostopolku ja haluttu tiedosto:

      /tmp/hellotero: 

Itse komento ja haluttu lopputulos (tiedosto on luotu)

             file.managed


Testataan ajamalla luotu hello tiedosto

            $ sudo salt-call --local state.apply hello

Ensimmäisen kerran ajettuna se luo tiedoston 

        /tmp/hellotero: 

Samaa komentoja voi ajaa niin monta kertaa kuin haluaa, mutta koska haluttu lopputulos on saavutettu, luotu tiedosto, mitään ei tapahdu.

Näin idempotenssi on saavutettu tässä tapauksessa







Salt contributors: Salt overview, kohdat:

Rules of YAML

Dataa säilytettään muodossa avain: arvo pareilla

Merkitään kaksoispisteellä
Avain:

arvo merkitään välilyönnillä avaimen kaksoispisteen jälkeen



case-sensitive: isoilla ja pienillä kirjaimilla on väliä

Välejä ei tehdä tabulaattorilla(tab), PELKÄSTÄÄN VÄLILYÖNNILLÄ (SPACE) 
Comments begin with a hash “#”.


YAML simple structure

YAML koostuu kolmesta eri elemententti tyypistä

Scalars: avain-arvo parin arvo voi olla numero, merkkijono tai totuusarvomuuttuja(boolean) 

Lists - avain: jonka alla on lista arvoja, jossa jokainen arvo on eri viivalla ja merkitty kahdella välilyönnillä ja väliviivalla 

Dictionaries - kokoelma avain-arvo pari  listoista


Lists and dictionaries - YAML block structures

YAML is organized into block structures.

Listan sisältö pitää sisentää yhdellä tai kahdella välilyönnillä ( kaksi on standardi)

Listan kohdat merkitään väliviivalla ja välilyönnillä 



a) Hei infrakoodi! Kokeile paikallisesti (esim 'sudo salt-call --local') infraa koodina. Kirjota sls-tiedosto, joka tekee esimerkkitiedoston /tmp/ -kansioon.
b) Aja esimerkki sls-tiedostosi verkon yli orjalla.
c) Tee sls-tiedosto, joka käyttää vähintään kahta eri tilafunktiota näistä: package, file, service, user. Tarkista eri ohjelmalla, että lopputulos on oikea. Osoita useammalla ajolla, että sls-tiedostosi on idempotentti.
